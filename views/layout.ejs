<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <meta name="description" content="<%= description %>">
    
    <!-- SEO Meta Tags -->
    <meta property="og:title" content="<%= title %>">
    <meta property="og:description" content="<%= description %>">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://knockoffkitchen.com<%= typeof url !== 'undefined' ? url : '' %>">
    <meta property="og:site_name" content="Knockoff Kitchen">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="<%= title %>">
    <meta name="twitter:description" content="<%= description %>">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="/css/style.css" as="style">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" as="style">
    
    <!-- Stylesheets -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
    
    <!-- Structured Data -->
    <% if (typeof recipe !== 'undefined' && recipe) { %>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org/",
      "@type": "Recipe",
      "name": "<%= recipe.title %>",
      "description": "<%= recipe.description || '' %>",
      "author": {
        "@type": "Organization",
        "name": "Knockoff Kitchen"
      },
      "datePublished": "<%= recipe.createdAt.toISOString() %>",
      "dateModified": "<%= recipe.updatedAt.toISOString() %>",
      <% if (recipe.image) { %>
      "image": "<%= recipe.image %>",
      <% } %>
      <% if (recipe.yield) { %>
      "recipeYield": "<%= recipe.yield %>",
      <% } %>
      <% if (recipe.prepTime) { %>
      "prepTime": "PT<%= recipe.prepTime %>",
      <% } %>
      <% if (recipe.cookTime) { %>
      "cookTime": "PT<%= recipe.cookTime %>",
      <% } %>
      <% if (recipe.totalTime) { %>
      "totalTime": "PT<%= recipe.totalTime %>",
      <% } %>
      <% if (recipe.ingredients && recipe.ingredients.length > 0) { %>
      "recipeIngredient": [
        <% recipe.ingredients.forEach((ingredient, index) => { %>
        "<%= ingredient.replace(/"/g, '\\"') %>"<%= index < recipe.ingredients.length - 1 ? ',' : '' %>
        <% }); %>
      ],
      <% } %>
      <% if (recipe.instructions && recipe.instructions.length > 0) { %>
      "recipeInstructions": [
        <% recipe.instructions.forEach((instruction, index) => { %>
        {
          "@type": "HowToStep",
          "text": "<%= instruction.replace(/"/g, '\\"') %>"
        }<%= index < recipe.instructions.length - 1 ? ',' : '' %>
        <% }); %>
      ],
      <% } %>
      <% if (recipe.nutrition && Object.keys(recipe.nutrition).length > 0) { %>
      "nutrition": {
        "@type": "NutritionInformation",
        <% if (recipe.nutrition.calories) { %>"calories": "<%= recipe.nutrition.calories %>",<% } %>
        <% if (recipe.nutrition.protein) { %>"proteinContent": "<%= recipe.nutrition.protein %>",<% } %>
        <% if (recipe.nutrition.carbs) { %>"carbohydrateContent": "<%= recipe.nutrition.carbs %>",<% } %>
        <% if (recipe.nutrition.fat) { %>"fatContent": "<%= recipe.nutrition.fat %>",<% } %>
        <% if (recipe.nutrition.fiber) { %>"fiberContent": "<%= recipe.nutrition.fiber %>",<% } %>
        <% if (recipe.nutrition.sugar) { %>"sugarContent": "<%= recipe.nutrition.sugar %>",<% } %>
        <% if (recipe.nutrition.sodium) { %>"sodiumContent": "<%= recipe.nutrition.sodium %>"<% } %>
      },
      <% } %>
      "recipeCategory": "<%= recipe.category %>",
      "recipeCuisine": "<%= recipe.brand %>"
    }
    </script>
    <% } %>
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://knockoffkitchen.com<%= typeof url !== 'undefined' ? url : '' %>">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-purple-900 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <!-- Logo and brand -->
                <div class="flex items-center">
                    <a href="/" class="flex-shrink-0 flex items-center">
                        <div class="border-2 border-yellow-400 px-3 py-1 rounded">
                            <span class="text-white font-bold text-lg">KNOCKOFF</span>
                            <span class="text-yellow-400 font-bold text-lg">KITCHEN</span>
                        </div>
                    </a>
                    
                    <div class="hidden md:flex items-center ml-6">
                        <span class="bg-yellow-400 text-purple-900 px-3 py-1 rounded-full text-sm font-semibold flex items-center">
                            üìù <span class="ml-1"><%= typeof counts !== 'undefined' && counts ? counts.totalRecipes.toLocaleString() : '23211' %> Homemade Recipes</span>
                        </span>
                    </div>
                </div>

                <!-- Search -->
                <div class="flex-1 max-w-lg mx-8 hidden md:flex">
                    <form action="/search" method="GET" class="w-full">
                        <div class="relative">
                            <input type="text" 
                                   name="q" 
                                   placeholder="Search recipes, brands..." 
                                   value="<%= typeof query !== 'undefined' ? query : '' %>"
                                   class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-yellow-400 focus:border-transparent">
                            <button type="submit" class="absolute right-2 top-2 text-gray-500 hover:text-gray-700">
                                üîç
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Navigation links -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="/" class="text-white hover:text-yellow-400 px-3 py-2 rounded-md text-sm font-medium <%= typeof currentRoute !== 'undefined' && currentRoute === 'home' ? 'text-yellow-400' : '' %>">
                        üè† Home
                    </a>
                    <a href="/recipes" class="text-white hover:text-yellow-400 px-3 py-2 rounded-md text-sm font-medium <%= typeof currentRoute !== 'undefined' && currentRoute === 'recipes' ? 'text-yellow-400' : '' %>">
                        üìñ Recipes
                    </a>
                    <a href="/categories" class="text-white hover:text-yellow-400 px-3 py-2 rounded-md text-sm font-medium <%= typeof currentRoute !== 'undefined' && currentRoute === 'categories' ? 'text-yellow-400' : '' %>">
                        üè∑Ô∏è Categories
                    </a>
                    <a href="/brands" class="text-white hover:text-yellow-400 px-3 py-2 rounded-md text-sm font-medium <%= typeof currentRoute !== 'undefined' && currentRoute === 'brands' ? 'text-yellow-400' : '' %>">
                        üè™ Brands
                    </a>
                    <a href="/about" class="text-white hover:text-yellow-400 px-3 py-2 rounded-md text-sm font-medium <%= typeof currentRoute !== 'undefined' && currentRoute === 'about' ? 'text-yellow-400' : '' %>">
                        ‚ÑπÔ∏è About
                    </a>
                    <a href="/contact" class="text-white hover:text-yellow-400 px-3 py-2 rounded-md text-sm font-medium <%= typeof currentRoute !== 'undefined' && currentRoute === 'contact' ? 'text-yellow-400' : '' %>">
                        üìß Contact
                    </a>
                </div>

                <!-- Mobile menu button -->
                <div class="md:hidden flex items-center">
                    <button type="button" class="mobile-menu-button text-white hover:text-yellow-400 focus:outline-none focus:text-yellow-400">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile menu -->
        <div class="mobile-menu hidden md:hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-purple-800">
                <!-- Mobile search -->
                <form action="/search" method="GET" class="mb-4">
                    <input type="text" 
                           name="q" 
                           placeholder="Search recipes, brands..." 
                           value="<%= typeof query !== 'undefined' ? query : '' %>"
                           class="w-full px-3 py-2 rounded border border-gray-300 focus:ring-2 focus:ring-yellow-400">
                </form>
                
                <a href="/" class="text-white hover:text-yellow-400 block px-3 py-2 rounded-md text-base font-medium">üè† Home</a>
                <a href="/recipes" class="text-white hover:text-yellow-400 block px-3 py-2 rounded-md text-base font-medium">üìñ Recipes</a>
                <a href="/categories" class="text-white hover:text-yellow-400 block px-3 py-2 rounded-md text-base font-medium">üè∑Ô∏è Categories</a>
                <a href="/brands" class="text-white hover:text-yellow-400 block px-3 py-2 rounded-md text-base font-medium">üè™ Brands</a>
                <a href="/about" class="text-white hover:text-yellow-400 block px-3 py-2 rounded-md text-base font-medium">‚ÑπÔ∏è About</a>
                <a href="/contact" class="text-white hover:text-yellow-400 block px-3 py-2 rounded-md text-base font-medium">üìß Contact</a>
            </div>
        </div>
    </nav>

    <!-- Main content -->
    <main>
        <%- body %>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="col-span-1 md:col-span-2">
                    <div class="border-2 border-yellow-400 px-3 py-1 rounded inline-block mb-4">
                        <span class="text-white font-bold text-lg">KNOCKOFF</span>
                        <span class="text-yellow-400 font-bold text-lg">KITCHEN</span>
                    </div>
                    <p class="text-gray-300 mb-4">
                        Discover thousands of copycat recipes from your favorite restaurants and brands. 
                        Create homemade versions of popular dishes with our easy-to-follow instructions.
                    </p>
                    <div class="text-sm text-gray-400">
                        <p><%= typeof counts !== 'undefined' && counts ? counts.totalRecipes.toLocaleString() : '23,000+' %> Recipes ‚Ä¢ <%= typeof counts !== 'undefined' && counts ? counts.totalBrands.toLocaleString() : '500+' %> Brands ‚Ä¢ <%= typeof counts !== 'undefined' && counts ? counts.totalCategories.toLocaleString() : '50+' %> Categories</p>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="/recipes" class="text-gray-300 hover:text-yellow-400">All Recipes</a></li>
                        <li><a href="/categories" class="text-gray-300 hover:text-yellow-400">Categories</a></li>
                        <li><a href="/brands" class="text-gray-300 hover:text-yellow-400">Brands</a></li>
                        <li><a href="/search" class="text-gray-300 hover:text-yellow-400">Search</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">Company</h3>
                    <ul class="space-y-2">
                        <li><a href="/about" class="text-gray-300 hover:text-yellow-400">About Us</a></li>
                        <li><a href="/contact" class="text-gray-300 hover:text-yellow-400">Contact</a></li>
                        <li><a href="/sitemap.xml" class="text-gray-300 hover:text-yellow-400">Sitemap</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-8 pt-8 text-center">
                <p class="text-gray-400 text-sm">
                    &copy; 2025 Knockoff Kitchen. All rights reserved. 
                    <span class="ml-4">Made with ‚ù§Ô∏è for home cooks everywhere.</span>
                </p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Mobile menu toggle
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuButton = document.querySelector('.mobile-menu-button');
            const mobileMenu = document.querySelector('.mobile-menu');
            
            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', function() {
                    mobileMenu.classList.toggle('hidden');
                });
            }
        });
        
        // Search functionality
        document.addEventListener('DOMContentLoaded', function() {
            const searchForms = document.querySelectorAll('form[action="/search"]');
            searchForms.forEach(form => {
                form.addEventListener('submit', function(e) {
                    const input = form.querySelector('input[name="q"]');
                    if (!input.value.trim()) {
                        e.preventDefault();
                        input.focus();
                    }
                });
            });
        });
    </script>
</body>
</html>
